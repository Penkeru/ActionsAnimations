function Utils(){}function ActionParams(n){this.version=n;this.binded=!1}function ActionHandler(){this.id=null;this.displayName=null;this.param=null;this.targtable=!1}function ActionsGroup(n,t){this.id=n;this.displayName=t;this.actionsHandlers={}}function GotoURLActionParams(n){this.binded=n;this.add("url","");this.add("target","newWindow");this.add("left",0);this.add("top",0);this.add("width",100);this.add("height",100);this.add("closeAllAdParts",!0)}function GotoURLActionHandler(){GotoURLActionHandler.prototype.id="gotoURL";GotoURLActionHandler.prototype.displayName="Goto URL";GotoURLActionHandler.prototype.param=GotoURLActionParams}function TriggerCTActionHandler(){TriggerCTActionHandler.prototype.id="triggerCT";TriggerCTActionHandler.prototype.displayName="Trigger ClickTrough"}function CustInterActionParams(n){this.binded=n;this.add("name","")}function CustInterActionHandler(){CustInterActionHandler.prototype.id="custInter";CustInterActionHandler.prototype.displayName="Custom Interaction";CustInterActionHandler.prototype.param=CustInterActionParams}function VideoPlayActionHandler(){VideoPlayActionHandler.prototype.id="play";VideoPlayActionHandler.prototype.displayName="Play";VideoPlayActionHandler.prototype.targetable=!0}function VideoStopActionHandler(){VideoStopActionHandler.prototype.id="stop";VideoStopActionHandler.prototype.displayName="Stop";VideoStopActionHandler.prototype.targetable=!0}function VideoPauseActionHandler(){VideoPauseActionHandler.prototype.id="pause";VideoPauseActionHandler.prototype.displayName="Pause";VideoPauseActionHandler.prototype.targetable=!0}function VideoReplayActionHandler(){VideoReplayActionHandler.prototype.id="replay";VideoReplayActionHandler.prototype.displayName="Replay";VideoReplayActionHandler.prototype.targetable=!0}function VideoMuteActionHandler(){VideoMuteActionHandler.prototype.id="mute";VideoMuteActionHandler.prototype.displayName="Mute";VideoMuteActionHandler.prototype.targetable=!0}function VideoUnmuteActionHandler(){VideoUnmuteActionHandler.prototype.id="unmute";VideoUnmuteActionHandler.prototype.displayName="Unmute";VideoUnmuteActionHandler.prototype.targetable=!0}function ExpandActionHandler(){ExpandActionHandler.prototype.id="expand";ExpandActionHandler.prototype.displayName="Expand"}function CollapseActionHandler(){CollapseActionHandler.prototype.id="collapse";CollapseActionHandler.prototype.displayName="Collapse"}function FadeActionParams(n){this.binded=n;this.add("duration",1e3);this.add("delay",0);this.add("ease","none");this.add("easePower",1)}function ShowHideActionParams(n){this.binded=n;this.add("delay",0)}function MotionActionParams(n){this.binded=n;this.add("startX",0);this.add("startY",0);this.add("endX",0);this.add("endY",0);this.add("duration",2e3);this.add("delay",0);this.add("ease","none");this.add("easePower",1)}function RotateActionParams(n){this.binded=n;this.add("degree",1);this.add("direction",1);this.add("duration",1e3);this.add("delay",0);this.add("ease","none");this.add("easePower",1)}function ScaleActionParams(n){this.binded=n;this.add("scale",1);this.add("duration",1e3);this.add("delay",0);this.add("ease","none");this.add("easePower",1)}function AnimActionHandler(){AnimActionHandler.prototype.targetable=!0}function FadeInActionHandler(){FadeInActionHandler.prototype.id="fadeIn";FadeInActionHandler.prototype.displayName="Fade In";FadeInActionHandler.prototype.param=FadeActionParams}function FadeOutActionHandler(){FadeOutActionHandler.prototype.id="fadeOut";FadeOutActionHandler.prototype.displayName="Fade Out";FadeOutActionHandler.prototype.param=FadeActionParams}function ShowActionHandler(){ShowActionHandler.prototype.id="show";ShowActionHandler.prototype.displayName="Show";ShowActionHandler.prototype.param=ShowHideActionParams}function HideActionHandler(){HideActionHandler.prototype.id="hide";HideActionHandler.prototype.displayName="Hide";HideActionHandler.prototype.param=ShowHideActionParams}function MotionActionHandler(){MotionActionHandler.prototype.id="motion";MotionActionHandler.prototype.displayName="Motion";MotionActionHandler.prototype.param=MotionActionParams}function SlideInActionHandler(){SlideInActionHandler.prototype.id="slideIn";SlideInActionHandler.prototype.displayName="Slide In";SlideInActionHandler.prototype.param=MotionActionParams}function SlideOutActionHandler(){SlideOutActionHandler.prototype.id="slideOut";SlideOutActionHandler.prototype.displayName="Slide Out";SlideOutActionHandler.prototype.param=MotionActionParams}function ScaleActionHandler(){ScaleActionHandler.prototype.id="scale";ScaleActionHandler.prototype.displayName="Scale";ScaleActionHandler.prototype.param=ScaleActionParams}function RotateActionHandler(){RotateActionHandler.prototype.id="rotate";RotateActionHandler.prototype.displayName="Rotate";RotateActionHandler.prototype.param=RotateActionParams}function Action(){this.actionParams=null;this.actionHandler=null}function Interaction(){this.eventId="";this.action=new Action;this.actionTarget=""}Utils.fixURL=function(n){return n.indexOf("http")!==0?"http://"+n:n};Utils.stopPropagation=function(n){n||(n=window.event);n.cancelBubble?n.cancelBubble=!0:n.stopPropagation()};Utils.getInternetExplorerVersion=function(){var n=-1,t,i;return navigator.appName=="Microsoft Internet Explorer"&&(t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),i.exec(t)!=null&&(n=parseFloat(RegExp.$1))),n};ActionParams.prototype.add=function(n,t){this[n]=this.binded?ko.observable(t):t};ActionParams.prototype.get=function(n){return this.binded?this[n]():this[n]};ActionParams.prototype.getInt=function(n){return parseInt(this.get(n),10)||0};ActionParams.prototype.set=function(n,t){this.binded?this[n](t):this[n]=t};ActionParams.prototype.getJSON=function(){var t={},n;t.version=this.version;for(n in this)typeof this[n]=="function"&&ko.isObservable(this[n])&&(t[n]=this.get(n));return t};ActionParams.prototype.initFromJSON=function(n){this.version=n.version;var t;if(this.binded)for(t in this)typeof this[t]=="function"&&ko.isObservable(this[t])&&this[t](n[t]);else for(t in this)t!=="binded"&&t!=="version"&&typeof this[t]!="function"&&(this[t]=n[t])};ActionParams.prototype.copy=function(){var t=new this.constructor(!0),n;for(n in this)typeof this[n]=="function"&&ko.isObservable(this[n])&&t[n](this[n]());return t};ActionHandler.prototype.init=function(){};ActionHandler.prototype.prepare=function(){};ActionHandler.prototype.getParams=function(n){return this.param?new this.param(n):null};var ActionHandlersFactory=new function(){function t(t,i){n[i.id]=i}var n={};this.getActionHandler=function(t){var i=t.split(".");return n[i[0]].getActionHandler(i[1])};this.getDesc=function(){var t=[],i;for(i in n)t.push(n[i].getDesc());return t};$(window).bind("registerActionGroupEvent",t)};ActionsGroup.prototype.getActionHandler=function(n){return this.actionsHandlers[n]};ActionsGroup.prototype.addHandler=function(n){var t=new n;this.actionsHandlers[t.id]=t};ActionsGroup.prototype.getDesc=function(){var t={text:this.displayName,children:[]},n;for(n in this.actionsHandlers)t.children.push({text:this.actionsHandlers[n].displayName,id:this.id+"."+this.actionsHandlers[n].id});return t};GotoURLActionParams.prototype=new ActionParams("1.0.0");GotoURLActionParams.prototype.constructor=GotoURLActionParams;GotoURLActionParams.prototype.validate=function(){var n=this.get("target"),t=this.get("width"),i=this.get("height");return(n==="newWindow"||n==="curWindow")&&this.get("left")!==undefined&&this.get("top")!==undefined&&t!==undefined&&i!==undefined&&this.get("closeAllAdParts")!==undefined};GotoURLActionHandler.prototype=new ActionHandler;GotoURLActionHandler.prototype.play=function(n,t){if(n.validate()){var t=n.get("target");t==="newWindow"?(n.get("closeAllAdParts")&&$(window).trigger("closeAllAdPartsEvent"),window.open(Utils.fixURL(n.get("url")),"_blank","location="+(n.get("location")?"yes":"no")+", menubar="+(n.get("menubar")?"yes":"no")+", left="+n.get("left")+", top="+n.get("top")+", width="+n.get("width")+", height="+n.get("height"))):t==="curWindow"&&window.open(Utils.fixURL(n.get("url")),"_top")}};TriggerCTActionHandler.prototype=new ActionHandler;TriggerCTActionHandler.prototype.play=function(){$(window).trigger("clickThroughEvent")};CustInterActionParams.prototype=new ActionParams("1.0.0");CustInterActionParams.prototype.constructor=CustInterActionParams;CustInterActionParams.prototype.validate=function(){return $.trim(this.get("name"))};CustInterActionHandler.prototype=new ActionHandler;CustInterActionHandler.prototype.play=function(n){n.validate()&&$(window).trigger("customInteractionEvent",n.get("name"))},function(){function n(){this.addHandler(GotoURLActionHandler);this.addHandler(TriggerCTActionHandler);this.addHandler(CustInterActionHandler)}n.prototype=new ActionsGroup("urlActions","URL Actions");$(window).trigger("registerActionGroupEvent",new n)}();VideoPlayActionHandler.prototype=new ActionHandler;VideoPlayActionHandler.prototype.play=function(n,t){var i=$("#"+t+" video");i&&i[0]&&i[0].play()};VideoStopActionHandler.prototype=new ActionHandler;VideoStopActionHandler.prototype.play=function(n,t){var i=$("#"+t+" video");i&&i[0]&&(i[0].pause(),i[0].currentTime=0)};VideoPauseActionHandler.prototype=new ActionHandler;VideoPauseActionHandler.prototype.play=function(n,t){var i=$("#"+t+" video");i&&i[0]&&i[0].pause()};VideoReplayActionHandler.prototype=new ActionHandler;VideoReplayActionHandler.prototype.play=function(n,t){var i=$("#"+t+" video");i&&i[0]&&(i[0].currentTime=0,i[0].play())};VideoMuteActionHandler.prototype=new ActionHandler;VideoMuteActionHandler.prototype.play=function(n,t){var i=$("#"+t+" video");i&&i[0]&&(i[0].muted=!0)};VideoUnmuteActionHandler.prototype=new ActionHandler;VideoUnmuteActionHandler.prototype.play=function(n,t){var i=$("#"+t+" video");i&&i[0]&&(i[0].muted=!1)},function(){function n(){this.addHandler(VideoPlayActionHandler);this.addHandler(VideoStopActionHandler);this.addHandler(VideoPauseActionHandler);this.addHandler(VideoReplayActionHandler);this.addHandler(VideoMuteActionHandler);this.addHandler(VideoUnmuteActionHandler)}n.prototype=new ActionsGroup("videoActions","Video Actions");$(window).trigger("registerActionGroupEvent",new n)}();ExpandActionHandler.prototype=new ActionHandler;ExpandActionHandler.prototype.play=function(){$(window).trigger("expandEvent")};CollapseActionHandler.prototype=new ActionHandler;CollapseActionHandler.prototype.play=function(){$(window).trigger("collapseEvent")},function(){function n(){this.addHandler(ExpandActionHandler);this.addHandler(CollapseActionHandler)}n.prototype=new ActionsGroup("expandable","Expandable");$(window).trigger("registerActionGroupEvent",new n)}();FadeActionParams.prototype=new ActionParams("1.0.0");FadeActionParams.prototype.constructor=FadeActionParams;FadeActionParams.prototype.validate=function(){var n=this.get("ease"),t=this.get("easePower");return this.get("duration")>=0&&this.get("delay")>=0&&(n==="none"||n==="easeIn"||n==="easeOut"||n==="easeInOut")&&t>=1&&t<=4};ShowHideActionParams.prototype=new ActionParams("1.0.0");ShowHideActionParams.prototype.constructor=ShowHideActionParams;ShowHideActionParams.prototype.validate=function(){return this.get("delay")>=0};MotionActionParams.prototype=new ActionParams("1.0.0");MotionActionParams.prototype.constructor=MotionActionParams;MotionActionParams.prototype.validate=function(){var n=this.get("ease"),t=this.get("easePower");return this.get("startX")!==undefined&&this.get("startY")!==undefined&&this.get("endX")!==undefined&&this.get("endY")!==undefined&&this.get("duration")>=0&&this.get("delay")>=0&&(n==="none"||n==="easeIn"||n==="easeOut"||n==="easeInOut")&&t>=1&&t<=4};RotateActionParams.prototype=new ActionParams("1.0.0");RotateActionParams.prototype.constructor=RotateActionParams;RotateActionParams.prototype.validate=function(){var n=this.get("ease"),t=this.get("easePower"),i=this.get("degree");return this.get("duration")>=0&&this.get("delay")>=0&&(i<0||i>9999||n==="none"||n==="easeIn"||n==="easeOut"||n==="easeInOut")&&t>=1&&t<=4};ScaleActionParams.prototype=new ActionParams("1.0.0");ScaleActionParams.prototype.constructor=ScaleActionParams;ScaleActionParams.prototype.validate=function(){var n=this.get("ease"),t=this.get("easePower"),i=this.get("scale");return this.get("duration")>=0&&this.get("delay")>=0&&(i<0||i>1e3||n==="none"||n==="easeIn"||n==="easeOut"||n==="easeInOut")&&t>=1&&t<=4};AnimActionHandler.prototype=new ActionHandler;AnimActionHandler.prototype.targetStateMap={};AnimActionHandler.prototype.offsetX=0;AnimActionHandler.prototype.offsetY=0;AnimActionHandler.prototype.init=function(n,t,i,r){var u,f;this.targetStateMap[t]||(u={},u.inProgress=0,u.opacity=$("#"+t).css("opacity"),u.position=$("#"+t).position(),f=$("#"+t+" video"),f!==null&&(u.controls=f.attr("controls")),this.targetStateMap[t]=u,AnimActionHandler.prototype.offsetX=i,AnimActionHandler.prototype.offsetY=r)};AnimActionHandler.prototype.getAnimParams=function(n){return{overwrite:0,onStart:this.onStartHandler,onStartParams:[this,n],onComplete:this.onCompleteHandler,onCompleteParams:[this,n]}};AnimActionHandler.prototype.onStartHandler=function(n,t){if(n.targetStateMap[t].inProgress===0){var i=$("#"+t+" video");i!==null&&i.attr("controls",null)}n.targetStateMap[t].inProgress++};AnimActionHandler.prototype.onCompleteHandler=function(n,t){if(n.targetStateMap[t].inProgress===1){var i=$("#"+t+" video");i!==null&&i.attr("controls",n.targetStateMap[t].controls)}n.targetStateMap[t].inProgress--};FadeInActionHandler.prototype=new AnimActionHandler;FadeInActionHandler.prototype.prepare=function(n,t){$("#"+t).css("opacity",0)};FadeInActionHandler.prototype.play=function(n,t){if(n.validate()){var i=this.getAnimParams(t);i.delay=n.getInt("delay")/1e3;i.opacity=this.targetStateMap[t].opacity;n.get("ease")!=="none"&&(i.ease="Power"+(n.getInt("easePower")-1)+"."+n.get("ease"));$("#"+t).css("display","block");TweenLite.fromTo($("#"+t),n.getInt("duration")/1e3,{opacity:0},i)}};FadeOutActionHandler.prototype=new AnimActionHandler;FadeOutActionHandler.prototype.prepare=function(n,t){$("#"+t).css("opacity",this.targetStateMap[t].opacity)};FadeOutActionHandler.prototype.play=function(n,t){var i,r;n.validate()&&(i=this.getAnimParams(t),i.delay=n.getInt("delay")/1e3,i.opacity=0,r={opacity:this.targetStateMap[t].opacity},$("#"+t).css("opacity",this.targetStateMap[t].opacity),n.get("ease")!=="none"&&(i.ease="Power"+(n.getInt("easePower")-1)+"."+n.get("ease")),TweenLite.fromTo($("#"+t),n.getInt("duration")/1e3,r,i))};ShowActionHandler.prototype=new AnimActionHandler;ShowActionHandler.prototype.play=function(n,t){var i=this.getAnimParams(t);i.delay=n.getInt("delay")/1e3;i.display="block";n.validate()&&TweenLite.to($("#"+t),.0001,i)};HideActionHandler.prototype=new AnimActionHandler;HideActionHandler.prototype.play=function(n,t){var i=this.getAnimParams(t);i.delay=n.getInt("delay")/1e3;i.display="none";n.validate()&&TweenLite.to($("#"+t),.0001,i)};MotionActionHandler.prototype=new AnimActionHandler;MotionActionHandler.prototype.prepare=function(n,t){$("#"+t).css({top:n.getInt("startY")+this.offsetY+"px",left:n.getInt("startX")+this.offsetX+"px"})};MotionActionHandler.prototype.play=function(n,t){if(n.validate()){var r={top:n.getInt("startY")+this.offsetY+"px",left:n.getInt("startX")+this.offsetX+"px"},i=this.getAnimParams(t);i.delay=n.getInt("delay")/1e3;i.top=n.getInt("endY")+this.offsetY+"px";i.left=n.getInt("endX")+this.offsetX+"px";n.get("ease")!=="none"&&(i.ease="Power"+(n.getInt("easePower")-1)+"."+n.get("ease"));TweenLite.fromTo($("#"+t),n.getInt("duration")/1e3,r,i)}};SlideInActionHandler.prototype=new AnimActionHandler;SlideInActionHandler.prototype.prepare=function(n,t){$("#"+t).css({top:n.getInt("startY")+this.offsetY+"px",left:n.getInt("startX")+this.offsetX+"px"})};SlideInActionHandler.prototype.play=function(n,t){if(n.validate()){var r={top:n.getInt("startY")+this.offsetY+"px",left:n.getInt("startX")+this.offsetX+"px"},i=this.getAnimParams(t);i.delay=n.getInt("delay")/1e3;i.top=this.targetStateMap[t].position.top+"px";i.left=this.targetStateMap[t].position.left+"px";n.get("ease")!=="none"&&(i.ease="Power"+(n.getInt("easePower")-1)+"."+n.get("ease"));TweenLite.fromTo($("#"+t),n.getInt("duration")/1e3,r,i)}};SlideOutActionHandler.prototype=new AnimActionHandler;SlideOutActionHandler.prototype.play=function(n,t){if(n.validate()){var r={top:this.targetStateMap[t].position.top+"px",left:this.targetStateMap[t].position.left+"px"},i=this.getAnimParams(t);i.delay=n.getInt("delay")/1e3;i.top=n.getInt("endY")+this.offsetY+"px";i.left=n.getInt("endX")+this.offsetX+"px";n.get("ease")!=="none"&&(i.ease="Power"+(n.getInt("easePower")-1)+"."+n.get("ease"));TweenLite.fromTo($("#"+t),n.getInt("duration")/1e3,r,i)}};ScaleActionHandler.prototype=new AnimActionHandler;ScaleActionHandler.prototype.play=function(n,t){var u;if(n.validate()){var i=this.getAnimParams(t),r=n.getInt("scale")/100,i=this.getAnimParams(t);i.scale=r;i.delay=n.getInt("delay")/1e3;i.parseTransform=!0;n.get("ease")!=="none"&&(i.ease="Power"+(n.getInt("easePower")-1)+"."+n.get("ease"));u=TweenLite.fromTo($("#"+t),n.getInt("duration")/1e3,{scale:1},i)}};RotateActionHandler.prototype=new AnimActionHandler;RotateActionHandler.prototype.play=function(n,t){if(n.validate()){var r=n.getInt("degree")*n.getInt("direction"),i=this.getAnimParams(t);i.rotation=r;i.delay=n.getInt("delay")/1e3;i.parseTransform=!0;n.get("ease")!=="none"&&(i.ease="Power"+(n.getInt("easePower")-1)+"."+n.get("ease"));TweenLite.fromTo($("#"+t),n.getInt("duration")/1e3,{rotation:0},i)}},function(){function n(){this.addHandler(SlideInActionHandler);this.addHandler(SlideOutActionHandler);this.addHandler(MotionActionHandler);this.addHandler(FadeInActionHandler);this.addHandler(FadeOutActionHandler);this.addHandler(ShowActionHandler);this.addHandler(HideActionHandler);this.addHandler(RotateActionHandler);this.addHandler(ScaleActionHandler)}n.prototype=new ActionsGroup("animation","Animation");$(window).trigger("registerActionGroupEvent",new n)}();Action.prototype=function(){var n=function(){return this.actionParams},t=function(){return this.actionHandler},i=function(){return this.getActionHandler()&&(this.getActionParams()===null||this.getActionParams().validate())},r=function(n){this.validate()&&this.getActionHandler().play(this.getActionParams(),n)},u=function(){return this.getActionHandler()&&this.getActionHandler().targetable},f=function(n,t,i){this.getActionHandler()&&this.getActionHandler().init(this.getActionParams(),n,t,i)},e=function(n){this.getActionHandler()&&this.getActionHandler().prepare(this.getActionParams(),n)},o=function(n){this.actionHandler=ActionHandlersFactory.getActionHandler(n.actionId);this.actionParams=this.getActionHandler().getParams(!1);n.actionParams&&this.actionParams.initFromJSON(n.actionParams)};return{play:r,validate:i,getActionParams:n,getActionHandler:t,initFromJSON:o,isTargetable:u,init:f,prepare:e}}();Interaction.prototype=function(){var n=function(){return this.eventId},t=function(){return this.action},i=function(){return this.actionTarget},r=function(){this.getAction().play(this.getActionTarget())},u=function(n){Utils.stopPropagation(n);n.data.play()},f=function(){return this.getEventId()&&this.getAction()},e=function(n){n&&f.call(this)&&$("#"+n).bind(this.getEventId(),this,u)},o=function(n,t){var i=0,r=0;arguments.length>0&&(i=n);arguments.length>1&&(r=t);this.getAction()&&this.getAction().init(this.getActionTarget(),i,r)},s=function(){this.getAction()&&this.getAction().prepare(this.getActionTarget())};return{attach:e,play:r,getEventId:n,getAction:t,getActionTarget:i,init:o,prepare:s}}();Interaction.createFromJSON=function(n){var t=new Interaction;return t.eventId=n.eventId||null,t.action.initFromJSON(n.action),t.actionTarget=n.actionTarget,t}